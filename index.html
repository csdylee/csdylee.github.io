<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì•„ì´ìœ  ì‹œê³„</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      width: 100vw;
      height: 100vh;
      background: #000000;
      color: #fff;
      font-family: 'Segoe UI', 'Pretendard', 'Apple SD Gothic Neo', Arial, sans-serif;
      overflow: hidden;
    }
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      width: 100vw;
    }
    #clock-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100vw;
      height: 100vh;
      user-select: none;
      cursor: pointer;
    }
    #date {
      font-size: 15vh;
      font-weight: 400;
      letter-spacing: 0.1em;
      margin-bottom: 2vh;
      opacity: 0.85;
      text-shadow: 0 2px 8px rgba(0,0,0,0.2);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    #time {
      font-size: 35vh;
      font-weight: 700;
      letter-spacing: 0.05em;
      text-shadow: 0 4px 24px rgba(0,0,0,0.3);
    }
    #wake-lock-status {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 400;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
      z-index: 1000;
      white-space: nowrap;
    }
    #wake-lock-status.show {
      opacity: 0.9;
    }
    @media (max-width: 600px) {
      #date {
        font-size: 10vh;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      #time {
        font-size: 30vh;
      }
    }
    
    /* íƒœë¸”ë¦¿ í™˜ê²½ ìµœì í™” (ê°¤ëŸ­ì‹œíƒ­ ë“±) */
    @media (min-width: 601px) and (max-width: 1024px) {
      #date {
        font-size: 12vh;
        margin-bottom: 3vh;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        width: 100%;
        text-align: center;
      }
      #time {
        font-size: 32vh;
      }
    }
    
    /* í° íƒœë¸”ë¦¿ í™˜ê²½ (ê°¤ëŸ­ì‹œíƒ­ S9 ë“±) */
    @media (min-width: 1025px) and (max-width: 1366px) {
      #date {
        font-size: 14vh;
        margin-bottom: 4vh;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        width: 100%;
        text-align: center;
      }
      #time {
        font-size: 36vh;
      }
    }
    
    /* PC í™˜ê²½ ìµœì í™” (1367px ì´ìƒ) */
    @media (min-width: 1367px) {
      #date {
        font-size: 15vh;
        margin-bottom: 2vh;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        width: 100%;
        text-align: center;
      }
      #time {
        font-size: 35vh;
      }
    }
  </style>
</head>
<body>
  <div id="clock-container">
    <div id="date"></div>
    <div id="time"></div>
    <div id="wake-lock-status">í™”ë©´ ì ê¸ˆ ë°©ì§€ í™œì„±í™”</div>
  </div>
  <video id="keep-awake-video" loop playsinline style="position:absolute;left:0;top:0;width:0;height:0;opacity:0;">
    <source src="data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAAAAG1wNDJpc29tYXZjMQAAAzRtb292AAAAbG12aGQAAAAAzaNacc2jWnEAAQAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAGGlvZHMAAAAAEwAACAEAAAEAAAAAAAAAAAABAAAAAAEAAAAAAAEAAAAYc3RiawAAABxzdHNkAAAAAAAAAAEAAABhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAABAAEAaaGF2YwEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACgAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAEAAAAUc3RzcwAAAAAAAAABAAAAAQAAABRzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAYc3RzegAAAAAAAAAAAAAAAQAAAAEAAAAUc3RjbwAAAAAAAAABAAAAMAAAABh1ZHRhAAAAFG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTguNzYuMTAw" type="video/mp4">
  </video>
  <script>
    // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ë¥¼ ìœ„í•œ ì •ë¦¬ í•¨ìˆ˜ë“¤
    var clockInterval = null;
    var clickTimeout = null;
    var touchStartTime = 0;
    var isDoubleTouch = false;
    var currentImageIndex = 0;
    var shuffledImageFiles = [];
    
    // í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ì •ë¦¬ í•¨ìˆ˜
    function cleanup() {
      if (clockInterval) {
        clearInterval(clockInterval);
        clockInterval = null;
      }
      if (clickTimeout) {
        clearTimeout(clickTimeout);
        clickTimeout = null;
      }
    }
    
    // í˜ì´ì§€ ì–¸ë¡œë“œ ì´ë²¤íŠ¸ ë“±ë¡ (Android 5 í˜¸í™˜)
    if (window.addEventListener) {
      window.addEventListener('beforeunload', cleanup, false);
      window.addEventListener('unload', cleanup, false);
    } else if (window.attachEvent) {
      window.attachEvent('onbeforeunload', cleanup);
      window.attachEvent('onunload', cleanup);
    }

    function updateClock() {
      try {
        var now = new Date();
        var dateEl = document.getElementById('date');
        var timeEl = document.getElementById('time');
        
        if (!dateEl || !timeEl) return; // ìš”ì†Œê°€ ì—†ìœ¼ë©´ ì¢…ë£Œ
        
        // Android 5 í˜¸í™˜: ì§§ì€ ë‚ ì§œ í˜•ì‹ìœ¼ë¡œ í‘œì‹œ
        var dateStr, timeStr;
        var year = now.getFullYear();
        var month = now.getMonth() + 1;
        var date = now.getDate();
        var hours = now.getHours();
        var minutes = now.getMinutes();
        
        // ìš”ì¼ ë°°ì—´
        var weekdays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
        var weekday = weekdays[now.getDay()];
        
        // ì§§ì€ í˜•ì‹: "2024.09.06 ê¸ˆ"
        dateStr = year + '.' + 
                 (month < 10 ? '0' : '') + month + '.' + 
                 (date < 10 ? '0' : '') + date + ' ' + weekday;
        
        timeStr = (hours < 10 ? '0' : '') + hours + ':' + (minutes < 10 ? '0' : '') + minutes;
        
        dateEl.textContent = dateStr;
        timeEl.textContent = timeStr;
      } catch (error) {
        console.log('ì‹œê³„ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
      }
    }
    
    clockInterval = setInterval(updateClock, 1000);
    updateClock();

    // í„°ì¹˜/í´ë¦­ìœ¼ë¡œ ë‹¤ìŒ ì´ë¯¸ì§€ë¡œ ë³€ê²½ (ë³€ìˆ˜ëŠ” ìƒë‹¨ì—ì„œ ì´ë¯¸ ì„ ì–¸ë¨)
    
    function handleImageChange() {
      if (!isDoubleTouch) {
        changeBackgroundImage();
      }
      isDoubleTouch = false;
    }
    
    // í„°ì¹˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ (ëª¨ë°”ì¼)
    document.getElementById('clock-container').addEventListener('touchstart', function(e) {
      touchStartTime = Date.now();
    }, false);
    
    document.getElementById('clock-container').addEventListener('touchend', function(e) {
      e.preventDefault(); // í´ë¦­ ì´ë²¤íŠ¸ ì¤‘ë³µ ë°©ì§€
      var touchDuration = Date.now() - touchStartTime;
      
      // ì§§ì€ í„°ì¹˜ë§Œ ì´ë¯¸ì§€ ë³€ê²½ (ë”ë¸”íƒ­ ë°©ì§€)
      if (touchDuration < 500) {
        if (clickTimeout) {
          clearTimeout(clickTimeout);
          isDoubleTouch = true; // ë”ë¸”íƒ­ ê°ì§€
          toggleFullscreen();
        } else {
          clickTimeout = setTimeout(function() {
            handleImageChange();
            clickTimeout = null;
          }, 300);
        }
      }
    }, false);
    
    // í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬ (PC)
    document.getElementById('clock-container').addEventListener('click', function(e) {
      // í„°ì¹˜ ê¸°ê¸°ì—ì„œëŠ” í´ë¦­ ì´ë²¤íŠ¸ ë¬´ì‹œ
      if ('ontouchstart' in window) {
        return;
      }
      
      // ë”ë¸” í´ë¦­ ì´ë²¤íŠ¸ì™€ ì¶©ëŒ ë°©ì§€
      if (e.detail === 1) {
        setTimeout(function() {
          if (e.detail === 1) {
            changeBackgroundImage();
          }
        }, 200);
      }
    });

    // ë”ë¸” í´ë¦­ìœ¼ë¡œ ì „ì²´í™”ë©´ í† ê¸€ (ëª¨ë°”ì¼ ì§€ì› í¬í•¨)
    document.getElementById('clock-container').addEventListener('dblclick', function() {
      toggleFullscreen();
    });

    // ì „ì²´í™”ë©´ í† ê¸€ í•¨ìˆ˜ (ëª¨ë°”ì¼ ì§€ì›)
    function toggleFullscreen() {
      try {
        if (!document.fullscreenElement && 
            !document.webkitFullscreenElement && 
            !document.mozFullScreenElement && 
            !document.msFullscreenElement) {
          // ì „ì²´í™”ë©´ ì§„ì…
          if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen();
          } else if (document.documentElement.webkitRequestFullscreen) {
            document.documentElement.webkitRequestFullscreen();
          } else if (document.documentElement.mozRequestFullScreen) {
            document.documentElement.mozRequestFullScreen();
          } else if (document.documentElement.msRequestFullscreen) {
            document.documentElement.msRequestFullscreen();
          }
        } else {
          // ì „ì²´í™”ë©´ ì¢…ë£Œ
          if (document.exitFullscreen) {
            document.exitFullscreen();
          } else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
          } else if (document.mozCancelFullScreen) {
            document.mozCancelFullScreen();
          } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
          }
        }
      } catch (error) {
        console.log('ì „ì²´í™”ë©´ ì „í™˜ ì‹¤íŒ¨:', error);
        // ëª¨ë°”ì¼ì—ì„œ ì „ì²´í™”ë©´ì´ ì§€ì›ë˜ì§€ ì•ŠëŠ” ê²½ìš° ëŒ€ì•ˆ ì œê³µ
        if (window.innerHeight === screen.height) {
          // ì´ë¯¸ ì „ì²´í™”ë©´ ìƒíƒœë¼ë©´ ì¢…ë£Œ ì‹œë„
          window.scrollTo(0, 0);
        }
      }
    }



    // í°íŠ¸ í¬ê¸° ìë™ ì¡°ì • (ë°˜ì‘í˜•)
    function resizeFont() {
      // clamp ì‚¬ìš©ìœ¼ë¡œ CSSì—ì„œ ì´ë¯¸ ë°˜ì‘í˜• ì²˜ë¦¬ë¨
      // í•„ìš”ì‹œ ì¶”ê°€ ì¡°ì • ê°€ëŠ¥
    }
    if (window.addEventListener) {
      window.addEventListener('resize', resizeFont, false);
    } else if (window.attachEvent) {
      window.attachEvent('onresize', resizeFont);
    }
    resizeFont();

    // ë¡œì»¬ ì´ë¯¸ì§€ ë°°ê²½ ë³€ê²½ ê¸°ëŠ¥ (ë³€ìˆ˜ëŠ” ìƒë‹¨ì—ì„œ ì´ë¯¸ ì„ ì–¸ë¨)
    var imageFiles = [
      '0aeb0a18e5164f02ab8.jpg',
      '1341d5f0a7591.jpg',
      '14780ee505d728.jpg',
      '14786ca31eff24.jpg',
      '14786fe712f66a.jpg',
      '1478774f5546f2.jpg',
      '14787ac8772fb1.jpg',
      '152eb29ec7d803.jpg',
      '152f175644215c.jpg',
      '152f1785ae2cfe.jpg',
      '153f629cea75d0.jpg',
      '16892014d69921.jpg',
      '1a0961b0641166.png',
      '21a6f0b3b9136f.jpg',
      '21a6f3ad82d011.jpg',
      '21a6f62d2391dd.jpg',
      '21aab11d0aed00.jpg',
      '225af8c0fefb4c.jpg',
      '2421e7b87441f7.jpeg',
      '285e8fcebfd55a.jpeg',
      '2a27413b0b338b.jpeg',
      '2a4bcf55b49235.jpeg',
      '2a4bd0e640e96d.jpeg',
      '2a4c3cfe93f7b8.jpeg',
      '2a4c3dd2e42fe3.jpeg',
      '2fdf43751f9fa4.jpg',
      '2fdf46d7df742a.jpg',
      '2fdf517cbabdf7.jpg',
      '2fdfaec0383dd5.jpg',
      '2fdfb23dbe5763.jpg',
      '3b8c8172b7aa4571ad6.jpg',
      '4018aa41953336.jpg',
      '533313b594c66e.jpeg',
      '53331aaf050096.jpeg',
      '53331dc97f41ad.jpeg',
      '533324d381b8f8.jpeg',
      '5336db56a46fb2.jpeg',
      '5336ded4cd4766.jpeg',
      '5336e54699fdce.jpeg',
      '534a7ca30e49452fad0.png',
      '6012237169c38a.png',
      '7d4d3025de8973.jpg',
      '868d684abf66a.jpg',
      '868e405f015de.jpg',
      'e6c6226acc93a.jpeg'
    ];

    // ì´ë¯¸ì§€ ë°°ì—´ì„ ì„ëŠ” í•¨ìˆ˜ (Fisher-Yates ì•Œê³ ë¦¬ì¦˜)
    function shuffleArray(array) {
      var shuffled = array.slice(); // ë°°ì—´ ë³µì‚¬
      for (var i = shuffled.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = shuffled[i];
        shuffled[i] = shuffled[j];
        shuffled[j] = temp;
      }
      return shuffled;
    }

    function changeBackgroundImage() {
      try {
        if (!shuffledImageFiles || shuffledImageFiles.length === 0) {
          console.log('ì´ë¯¸ì§€ íŒŒì¼ ëª©ë¡ì´ ì—†ìŠµë‹ˆë‹¤.');
          return;
        }
        
        var imageFile = shuffledImageFiles[currentImageIndex];
        var imagePath = 'images/' + imageFile;
        
        // Android 5 í˜¸í™˜: í…œí”Œë¦¿ ë¦¬í„°ëŸ´ ëŒ€ì‹  ë¬¸ìì—´ ì—°ê²° ì‚¬ìš©
        document.body.style.backgroundImage = 'linear-gradient(135deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.3) 100%), url(\'' + imagePath + '\')';
        document.body.style.backgroundSize = 'cover';
        document.body.style.backgroundPosition = 'center';
        document.body.style.backgroundRepeat = 'no-repeat';
        
        console.log('ë°°ê²½ ì´ë¯¸ì§€ ë³€ê²½: ' + imageFile);
        
        // ë‹¤ìŒ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ë¡œ ì´ë™ (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ë¥¼ ìœ„í•œ ì•ˆì „í•œ ì¦ê°€)
        currentImageIndex = (currentImageIndex + 1) % shuffledImageFiles.length;
      } catch (error) {
        console.log('ë°°ê²½ ì´ë¯¸ì§€ ë³€ê²½ ì¤‘ ì˜¤ë¥˜:', error);
      }
    }


    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ë¯¸ì§€ ë°°ì—´ì„ ì„ê¸°
    try {
      shuffledImageFiles = shuffleArray(imageFiles);
      console.log('ì„ì¸ ì´ë¯¸ì§€ ìˆœì„œ:', shuffledImageFiles);
      
      // ì´ˆê¸° ë°°ê²½ ì´ë¯¸ì§€ ì„¤ì •
      changeBackgroundImage();
    } catch (error) {
      console.log('ì´ë¯¸ì§€ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜:', error);
    }


    // í™”ë©´ ì ê¸ˆ ë°©ì§€ ìƒíƒœ í‘œì‹œ í•¨ìˆ˜
    function showWakeLockStatus(message, isSuccess) {
      var statusEl = document.getElementById('wake-lock-status');
      if (statusEl) {
        statusEl.textContent = message;
        statusEl.className = 'show';
        
        // 5ì´ˆ í›„ ìë™ìœ¼ë¡œ ìˆ¨ê¹€
        setTimeout(function() {
          statusEl.className = '';
        }, 5000);
      }
    }

    // ì ˆì „ ëª¨ë“œ ë°©ì§€ìš© ë¹„ë””ì˜¤ ì¬ìƒ (Android 5 í˜¸í™˜)
    function playKeepAwakeVideo() {
      var video = document.getElementById('keep-awake-video');
      if (video) {
        try {
          // Android 5 í˜¸í™˜: í”„ë¡œë¯¸ìŠ¤ ì§€ì› í™•ì¸
          var playPromise = video.play();
          if (playPromise && typeof playPromise.then === 'function') {
            // í”„ë¡œë¯¸ìŠ¤ë¥¼ ì§€ì›í•˜ëŠ” ê²½ìš°
            playPromise.then(function() {
              console.log('ì ˆì „ ëª¨ë“œ ë°©ì§€ ë¹„ë””ì˜¤ ì¬ìƒ ì‹œì‘.');
              showWakeLockStatus('ğŸ”’ í™”ë©´ ì ê¸ˆ ë°©ì§€ í™œì„±í™”', true);
            }).catch(function(error) {
              console.log('ì ˆì „ ëª¨ë“œ ë°©ì§€ ë¹„ë””ì˜¤ ìë™ ì¬ìƒ ì‹¤íŒ¨:', error);
              showWakeLockStatus('âš ï¸ í™”ë©´ ì ê¸ˆ ë°©ì§€ ì‹¤íŒ¨ - í„°ì¹˜í•˜ì—¬ í™œì„±í™”', false);
              // Android 5 í˜¸í™˜: í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ìˆ˜ë™ êµ¬í˜„
              var playOnce = function() {
                var retryPromise = video.play();
                if (retryPromise && typeof retryPromise.then === 'function') {
                  retryPromise.then(function() {
                    showWakeLockStatus('ğŸ”’ í™”ë©´ ì ê¸ˆ ë°©ì§€ í™œì„±í™”', true);
                  }).catch(function() {
                    showWakeLockStatus('âŒ í™”ë©´ ì ê¸ˆ ë°©ì§€ ë¶ˆê°€ëŠ¥', false);
                  });
                } else {
                  showWakeLockStatus('ğŸ”’ í™”ë©´ ì ê¸ˆ ë°©ì§€ í™œì„±í™”', true);
                }
                document.body.removeEventListener('click', playOnce);
                document.body.removeEventListener('touchend', playOnce);
              };
              document.body.addEventListener('click', playOnce);
              document.body.addEventListener('touchend', playOnce);
            });
          } else {
            // í”„ë¡œë¯¸ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” êµ¬í˜• ë¸Œë¼ìš°ì €
            console.log('ì ˆì „ ëª¨ë“œ ë°©ì§€ ë¹„ë””ì˜¤ ì¬ìƒ ì‹œì‘.');
            showWakeLockStatus('ğŸ”’ í™”ë©´ ì ê¸ˆ ë°©ì§€ í™œì„±í™”', true);
          }
        } catch (error) {
          console.log('ë¹„ë””ì˜¤ ì¬ìƒ ì¤‘ ì˜¤ë¥˜:', error);
          showWakeLockStatus('âŒ í™”ë©´ ì ê¸ˆ ë°©ì§€ ì˜¤ë¥˜', false);
        }
      }
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¹„ë””ì˜¤ ì¬ìƒ ì‹œë„
    playKeepAwakeVideo();
  </script>
</body>
</html>